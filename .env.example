# ============================================
# K-ALMIS Environment Configuration
# ============================================
# Copy this file to .env and fill in your actual values
# Never commit .env file to version control!

# ============================================
# DATABASE CONFIGURATION
# ============================================
# PostgreSQL database connection settings
DB_HOST=localhost
DB_PORT=5432
DB_USER=kalmis_user
DB_PASSWORD=your_secure_database_password_here
DB_NAME=kalmis_db

# Example for remote database:
# DB_HOST=your-db-server.com
# DB_PORT=5432

# ============================================
# EMAIL CONFIGURATION (Sendinblue/Brevo)
# ============================================
# Get your API key from: https://app.brevo.com/settings/keys/api
SENDINBLUE_API_KEY=xkeysib-your-api-key-here-replace-this-with-real-key

# Verified sender email and name
SENDER_EMAIL=noreply@yourdomain.com
SENDER_NAME=K-ALMIS System

# Example:
# SENDER_EMAIL=info@yourorganization.go.ke
# SENDER_NAME=County Asset Management

# ============================================
# APPLICATION SETTINGS
# ============================================
# Frontend URL (for email links, password reset, etc.)
FRONTEND_URL=http://localhost:5173

# For production:
# FRONTEND_URL=https://your-domain.com

# ============================================
# SECURITY KEYS
# ============================================
# Generate secure random keys using:
# python -c "import secrets; print(secrets.token_urlsafe(32))"

# Main secret key for JWT tokens (REQUIRED - minimum 32 characters)
SECRET_KEY=your-secret-key-minimum-32-characters-replace-this-immediately

# Secret key for device fingerprinting (REQUIRED - minimum 32 characters)
SECRET_KEY_FP=your-fingerprint-secret-key-minimum-32-chars-replace-now

# ============================================
# IP REPUTATION SERVICE
# ============================================
# Optional but recommended for security
# Get free API key from: https://www.abuseipdb.com/account/api
ABUSEDB_KEY=your-abuseipdb-api-key-here

# Leave empty to disable IP reputation checking:
# ABUSEDB_KEY=

# ============================================
# REDIS CONFIGURATION
# ============================================
# Redis server for session management and caching
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# For secured Redis (recommended for production):
# REDIS_PASSWORD=your_redis_password

# For remote Redis:
# REDIS_HOST=your-redis-server.com
# REDIS_PORT=6379

# ============================================
# FILE STORAGE (Cloudinary)
# ============================================
# should you choose to handle file storage- currently system assumes
# files already uploaded and takes url to resource in place of a file

# Sign up at: https://cloudinary.com/
# Get credentials from: https://console.cloudinary.com/console

CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret

# Example:
# CLOUDINARY_CLOUD_NAME=kalmis-assets
# CLOUDINARY_API_KEY=123456789012345
# CLOUDINARY_API_SECRET=abcdefghijklmnopqrstuvwxyz123456

# ============================================
# SECURITY SETTINGS (Authentication & Authorization)
# ============================================
# THESE VALUES HAVE BEEN SET ON system_vars.py, but ill document them here roughly
# see /system_vars.py

# note this in applicable in auth new routes, dissable auth 1 by commenting its import on main.py
# All values below have defaults in code, override only if needed

# Failed Login Attempts (before account lock)
KNOWN_DEVICE_MAX_ATTEMPTS=5
UNKNOWN_DEVICE_MAX_ATTEMPTS=2
FINAL_ATTEMPTS_BEFORE_LOCK=2

# Account Unlock Token Expiry (in minutes)
UNLOCK_ACCOUNT_TOKEN_EXPIRY_MINUTES=60

# Temporary Account Disable Duration (in hours)
TEMP_DISABLE_DURATION_HOURS=24

# Password Policy
PASSWORD_EXPIRY_DAYS=90

# Fraud Detection
FRAUD_SCORE_LIMIT=70

# Working Hours Monitoring (24-hour format)
WORKING_HOURS_START=8
WORKING_HOURS_END=17

# Expected Timezone and Language
EXPECTED_TIMEZONE=EAT
EXPECTED_LANGUAGE=en

# IP Whitelisting
IP_WHITELIST_THRESHOLD=2

# Multi-Factor Authentication (MFA)
MFA_CODE_EXPIRY_MINUTES=20
MFA_CODE_LENGTH=6

# Session Management
TEMP_SESSION_TOKEN_EXPIRY_MINUTES=30

# Account Inactivity
INACTIVE_ACCOUNT_DAYS=60

 
# ============================================
# LOGGING CONFIGURATION
# ============================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# For development (more verbose):
# LOG_LEVEL=DEBUG

# For production (less verbose):
# LOG_LEVEL=WARNING

# ============================================
# CORS SETTINGS
# ============================================
# origins handled on main.py file, but you may migrate them here
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# For production (specify your domains):
# ALLOWED_ORIGINS=https://yourdomain.com,https://app.yourdomain.com

# Allow all origins (NOT recommended for production):
# ALLOWED_ORIGINS=*

# ============================================
# API RATE LIMITING
# ============================================
# Requests per minute per IP (optional)
RATE_LIMIT_PER_MINUTE=60

# For stricter rate limiting:
# RATE_LIMIT_PER_MINUTE=30

# ============================================
# FILE UPLOAD LIMITS
# ============================================
# Maximum file size in MB
MAX_FILE_SIZE_MB=100

# Allowed file types (comma-separated)
ALLOWED_FILE_TYPES=pdf,png,jpg,jpeg,gif,doc,docx,xls,xlsx

# ============================================
# BACKUP CONFIGURATION (Optional)
# ============================================
# there is a backup helper script that will be reading from same .env file
# Database backup location
BACKUP_DIR=/var/backups/kalmis

# Backup retention days
BACKUP_RETENTION_DAYS=30


# For development environment:
# DEBUG=true

# ============================================
# NOTES
# ============================================
# 1. Keep this file secure and never commit to version control
# 2. Generate strong SECRET_KEY and SECRET_KEY_FP using:
#    python -c "import secrets; print(secrets.token_urlsafe(32))"
# 3. Use different keys for development and production
# 4. All values with "your-" prefix MUST be replaced
# 5. Optional values can be left empty or removed
# 6. Boolean values: true/false (lowercase)
# 7. Numbers: no quotes needed
# 8. Strings with spaces: use quotes
# 9. Lists: comma-separated, no spaces

# ============================================
# QUICK SETUP CHECKLIST
# ============================================
# [ ] Database credentials configured
# [ ] Email service (Sendinblue) API key added
# [ ] SECRET_KEY and SECRET_KEY_FP generated and set
# [ ] Cloudinary credentials configured
# [ ] Frontend URL updated
# [ ] Redis configuration verified
# [ ] CORS origins set for your domain
# [ ] Production environment variables secured
# [ ] File permissions restricted (chmod 600 .env)
